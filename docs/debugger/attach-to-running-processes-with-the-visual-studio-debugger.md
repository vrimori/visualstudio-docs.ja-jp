---
title: デバッガーで実行中のプロセスのアタッチ |Microsoft Docs
ms.custom: seodec18
ms.date: 09/27/2018
ms.topic: conceptual
f1_keywords:
- vs.debug.processes.attach
- vs.debug.process
- vs.debug.programs
- vs.debug.detaching
- vs.debug.processes
- vs.debug.error.attach
- vs.debug.remotemachine
dev_langs:
- CSharp
- FSharp
- C++
- VB
helpviewer_keywords:
- remote debugging, attaching to programs
- processes, attaching to running processes
- Attach to Process dialog box
- debugging [Visual Studio], attaching to processes
- debugger, processes
ms.assetid: 27900e58-090c-4211-a309-b3e1496d5824
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: fa81baae882376aae99eedd1fdf825c863fd70c4
ms.sourcegitcommit: 2193323efc608118e0ce6f6b2ff532f158245d56
ms.translationtype: MTE95
ms.contentlocale: ja-JP
ms.lasthandoff: 01/25/2019
ms.locfileid: "54932403"
---
# <a name="attach-to-running-processes-with-the-visual-studio-debugger"></a>Visual Studio デバッガーで実行中のプロセスへのアタッチ
ローカルまたはリモート コンピューターで実行中のプロセスに、Visual Studio デバッガーをアタッチできます。 プロセスが実行されると、選択**デバッグ** > **プロセスにアタッチ**またはキーを押します**Ctrl**+**Alt** +**P**使用して、Visual Studio で、**プロセスにアタッチ**プロセスにデバッガーをアタッチするためのダイアログ。

使用することができます**プロセスにアタッチ**をローカルまたはリモート コンピューターで実行中のアプリをデバッグするには、同時に複数のプロセスをデバッグ、Visual Studio で作成されていないアプリをデバッグまたはで Visual Studio から開始していないすべてのアプリをデバッグしますデバッガーをアタッチします。 たとえば、デバッガーなしのアプリを実行するいるし、例外が発生すると、アプリを実行しているプロセスにデバッガーをアタッチし、デバッグを開始します。

Visual Studio で基本的なデバッグ方法の詳細については、次を参照してください。[デバッガーでのはじめ](../debugger/debugger-feature-tour.md)します。

> [!TIP]
> わからないを使用するかどうか**プロセスにアタッチ**デバッグ シナリオのでしょうか。 参照してください[デバッグ シナリオ共通](#BKMK_Scenarios)します。 

##  <a name="BKMK_Attach_to_a_running_process"></a> ローカル コンピューターで実行中のプロセスにアタッチします。  

以前にアタッチしたプロセスにすばやく再アタッチを参照してください。[プロセスに再アタッチ](#BKMK_reattach)します。 

リモート コンピューター上のプロセスをデバッグするを参照してください。[リモート コンピューター上のプロセスにアタッチ](#BKMK_Attach_to_a_process_on_a_remote_computer)します。

**ローカル コンピューター上のプロセスにアタッチします。**  

1. Visual Studio で、次のように選択します**デバッグ** > **プロセスにアタッチ**(またはキーを押します**Ctrl**+**Alt** +。 **P**) を開く、**プロセスにアタッチ** ダイアログ ボックス。
  
   **接続の種類**に設定する必要があります**既定**します。 **接続先**ローカル コンピューター名にする必要があります。 
  
   ![DBG_Basics_Attach_To_Process](../debugger/media/DBG_Basics_Attach_To_Process.png "DBG_Basics_Attach_To_Process") 
  
2. **選択可能なプロセス**一覧、検索して、プロセスまたはプロセスにアタッチするを選択します。  

   - プロセスをすばやく選択するには、入力の名前またはの最初の文字、**プロセスをフィルター**ボックス。 
  
   - プロセス名がわからない場合、一覧を参照または参照してください[デバッグ シナリオ共通](#BKMK_Scenarios)のいくつかの一般的なプロセス名。 
  
   >[!TIP]
   >プロセスの開始し、停止中にバック グラウンドで、**プロセスにアタッチ**実行中のプロセスの一覧が常に最新でないために、ダイアログ ボックスが開いています。 選択することができます**更新**いつでも現在の一覧を確認します。 
  
3. **にアタッチ**フィールドに、デバッグするコードの種類が表示されているかどうかを確認します。 既定の**自動**のほとんどの種類のアプリの動作を設定します。 
  
   コードの種類を手動で選択します。
   1. **[選択]** をクリックします。 
   1. **コードの種類の選択**ダイアログ ボックスで、**コードの種類をデバッグ**します。
   1. デバッグするコードの種類を選択します。
   1. **[OK]** を選択します。
  
4. 選択**アタッチ**します。
  
>[!NOTE]
>デバッグについては、複数のアプリにアタッチできますが、一度に 1 つだけのアプリは、デバッガーでアクティブにします。 作業中のアプリを設定するには、Visual studio**デバッグの場所**ツールバーまたは**プロセス**ウィンドウ。  

##  <a name="BKMK_Attach_to_a_process_on_a_remote_computer"></a>リモート コンピューター上のプロセスにアタッチする  

リモート コンピューターを選択することも、**プロセスにアタッチ** ダイアログ ボックスでは、そのコンピューターで実行されている選択可能なプロセスの一覧を表示し、1 つ以上のデバッグのためのプロセスにアタッチします。 リモート デバッガー (*msvsmon.exe*) リモート コンピューターで実行する必要があります。 詳細については、次を参照してください。[リモート デバッグ](../debugger/remote-debugging.md)します。 

IIS に配置されている ASP.NET アプリケーションのデバッグに関するより詳細な手順については、次を参照してください。[リモート リモート IIS コンピューター上の ASP.NET のデバッグ](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)します。

**リモート コンピューターで実行中のプロセスにアタッチ。**  

1. Visual Studio で、次のように選択します**デバッグ** > **プロセスにアタッチ**(またはキーを押します**Ctrl**+**Alt** +。 **P**) を開く、**プロセスにアタッチ** ダイアログ ボックス。
  
2. **接続の種類**べき**既定**のほとんどの場合。 **接続のターゲット**ボックスで、次のメソッドのいずれかを使用して、リモート コンピューターを選択します。

   - 次のドロップダウン矢印を選択**接続のターゲット**、ドロップダウン リストから、コンピューター名を選択します。  
   - コンピューター名を入力、**接続のターゲット**ボックス。
      
     > [!NOTE]
     > リモート コンピューター名を使用して接続できない場合、IP を使用してお試しくださいし、ポートのアドレス (たとえば、 `123.45.678.9:4022`)。 4022 では、Visual Studio 2017 x64 リモート デバッガーの既定のポートです。 その他のリモート デバッガーのポート割り当てでは、次を参照してください。[リモート デバッガーのポートの割り当て](remote-debugger-port-assignments.md)します。  
      
   - 選択、**検索**横に、**接続のターゲット**ボックスを開く、**リモート接続** ダイアログ ボックス。 **リモート接続** ダイアログ ボックスには、ローカル サブネット上またはコンピューターに直接接続されるすべてのデバイスが一覧表示されます。 必要があります[UDP ポート 3702 を開く](../debugger/remote-debugger-port-assignments.md)サーバーにリモート デバイスを検出します。 コンピューターを選択し、をクリックし、デバイス**選択**します。 
  
   > [!NOTE]
   > **接続の種類**設定は、デバッグ セッション間で保持します。 **接続のターゲット**設定を対象とするとデバッグ接続に成功が発生した場合にのみ、デバッグ セッション間で保持します。

3. クリックして**更新**を設定する、**選択可能なプロセス**一覧。
     
    >[!TIP]
    >プロセスの開始し、停止中にバック グラウンドで、**プロセスにアタッチ**実行中のプロセスの一覧が常に最新でないために、ダイアログ ボックスが開いています。 選択することができます**更新**いつでも現在の一覧を確認します。 
     
4. **選択可能なプロセス**一覧、検索して、プロセスまたはプロセスにアタッチするを選択します。  

   - プロセスをすばやく選択するには、入力の名前またはの最初の文字、**プロセスをフィルター**ボックス。 
  
   - プロセス名がわからない場合、一覧を参照または参照してください[デバッグ シナリオ共通](#BKMK_Scenarios)のいくつかの一般的なプロセス名。 
  
   - すべてのユーザー アカウントで実行されているプロセスを検索するには、選択、**プロセスのすべてのユーザーを表示する**チェック ボックスをオンします。
      
     >[!NOTE]
     >信頼関係のないユーザー アカウントによって所有されているプロセスにアタッチしようとすると、セキュリティ警告の確認ダイアログ ボックスが表示されます。 詳細については、次を参照してください。[セキュリティ警告。信頼されていないユーザーが所有するプロセスにアタッチするには危険が伴います。以下の情報に関して疑わしい点がある場合や、不明な場合は、このプロセスにアタッチしないでください](../debugger/security-warning-attaching-to-a-process-owned-by-an-untrusted-user.md)  
      
5. **にアタッチ**フィールドに、デバッグするコードの種類が表示されているかどうかを確認します。 既定の**自動**のほとんどの種類のアプリの動作を設定します。 
  
   コードの種類を手動で選択します。
   1. **[選択]** をクリックします。 
   1. **コードの種類の選択**ダイアログ ボックスで、**コードの種類をデバッグ**します。
   1. デバッグするコードの種類を選択します。
   1. **[OK]** を選択します。
  
6. 選択**アタッチ**します。
  
>[!NOTE]
>デバッグについては、複数のアプリにアタッチできますが、一度に 1 つだけのアプリは、デバッガーでアクティブにします。 作業中のアプリを設定するには、Visual studio**デバッグの場所**ツールバーまたは**プロセス**ウィンドウ。  

場合によって、リモート デスクトップ (ターミナル サービス) セッションでデバッグするときに、**選択可能なプロセス**リストは、すべての可能なプロセスを表示しません。 制限付きユーザー アカウントを持つユーザーとして Visual Studio を実行している場合、**選択可能なプロセス**リストは、セッション 0 で実行されているプロセスを表示しません。 サービスとを含むその他のサーバー プロセスにセッション 0 が使用される*w3wp.exe*します。 この問題を解決するには、管理者アカウントで [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] を実行するか、ターミナル サービス セッションからではなくサーバー コンソールから [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] を実行します。 

どちらの方法も実行できない場合、3 つ目の方法として、Windows コマンド ラインから `vsjitdebugger.exe -p <ProcessId>` を実行することによって、プロセスにアタッチできます。 プロセス ID は *tlist.exe* を使用して確認できます。 *tlist.exe* を入手するには、[WDK と WinDbg のダウンロード](/windows-hardware/drivers/download-the-wdk)に関するページで Windows 用のデバッグ ツールをダウンロードし、インストールします。

## <a name="BKMK_reattach"></a> プロセスに再アタッチします。

選択してに接続されていたプロセスにすばやく再アタッチできる**デバッグ** > **プロセスに再アタッチ**(**Shift** +**Alt**+**P**)。 このコマンドを選択すると、デバッガーはすぐにアタッチしようと最後のプロセスにより、前のプロセス ID と一致する最初の試行にアタッチしてかどうか失敗すると、前に一致させることでプロセス名。 一致が見つからない場合、または複数のプロセスは同じ名前を持つ場合、**プロセスにアタッチ**正しいプロセスを選択するダイアログ ボックスが開きます。

> [!NOTE]
> **プロセスに再アタッチ**コマンドは、Visual Studio 2017 の新機能です。

## <a name="BKMK_Scenarios"></a> 一般的なデバッグ シナリオ

使用するかどうかを判断するのに役立つ**プロセスにアタッチ**とどのようなプロセスにアタッチする、次の表に、詳細な手順へのリンクをいくつかの一般的なデバッグ シナリオでご利用いただけます。 (一覧は、exhaustive されません)。 

ユニバーサル Windows アプリ (UWP) アプリのように、アプリの種類によって、プロセス名に直接アタッチしないを使用して、**インストール済みアプリ パッケージのデバッグ**メニュー オプションは、代わりに Visual Studio で (テーブルを参照してください)。

C++ で記述されたコードにデバッガーをアタッチするには、コードが `DebuggableAttribute`を生成する必要があります。 [/ASSEMBLYDEBUG](/cpp/build/reference/assemblydebug-add-debuggableattribute) リンカー オプションを使ってリンクすると、これを自動的にコードに追加できます。

クライアント側スクリプトのデバッグ、スクリプトのデバッグをする必要があります有効にする、ブラウザーで。 Chrome でクライアント側スクリプトをデバッグするには、次のように選択します。 **Webkit**として、コードの種類と、アプリの種類によっては、Chrome のすべてのインスタンスを閉じて、デバッグ モードでブラウザーを起動する必要があります (型`chrome.exe --remote-debugging-port=9222`コマンドラインから)。

Visual Studio で、アタッチする実行中のプロセスをすばやく選択するには、入力**Ctrl**+**Alt**+**P**の最初の文字を入力し、プロセスの名前。

|シナリオ|メソッドをデバッグします。|プロセス名|メモとリンク|
|-|-|-|-|
|ASP.NET 4 のリモート デバッグまたは IIS サーバー上の 4.5|リモート ツールを使用し、**プロセスにアタッチします。**|*w3wp.exe*|参照してください[リモート リモート IIS コンピューター上の ASP.NET のデバッグ](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)|
|ASP.NET Core、IIS サーバー上のリモート デバッグ|リモート ツールを使用し、**プロセスにアタッチします。**|*dotnet.exe*|アプリの展開を参照してください。 [Publish to IIS](https://docs.asp.net/en/latest/publishing/iis.html)します。 デバッグについては、次を参照してください[リモート IIS コンピューター上のリモート デバッグ ASP.NET Core。](../debugger/remote-debugging-aspnet-on-a-remote-iis-computer.md)|
|サポートされているアプリの種類をローカルの IIS サーバー上のクライアント側スクリプトをデバッグします。 |使用**プロセスにアタッチします。**|*chrome.exe*、 *MicrosoftEdgeCP.exe*、または*iexplore.exe*|スクリプトのデバッグを有効にする必要があります。 Chrome、デバッグ モードで Chrome も実行する必要があります**Webkit コード**で、**にアタッチ**フィールド。|
|ローカル コンピューター上の c#、Visual Basic、または C++ アプリをデバッグします。|いずれかを使用して、[標準デバッグ](../debugger/debugger-feature-tour.md)または**プロセスにアタッチします。**|*\<アプリ名>.exe*|ほとんどのシナリオで標準的なデバッグを使用していないと**プロセスにアタッチ**します。|
|Windows デスクトップ アプリのリモート デバッグ|リモート ツール|N/A| 参照してください[c# または Visual Basic アプリのリモート デバッグ](../debugger/remote-debugging-csharp.md)または[C++ アプリのリモート デバッグ](../debugger/remote-debugging-cpp.md)|
|デバッガーなしのアプリを起動した後、ローカル コンピューター上の ASP.NET アプリをデバッグします。|使用**プロセスにアタッチします。**|*iiexpress.exe*|これは、アプリをロードすると便利な可能性がありますより高速など (たとえば) プロファイリングを行う場合。 |
|サーバー プロセスでその他のサポートされているアプリの種類をデバッグします。|サーバーがリモートの場合は、リモート ツールを使用し、**プロセスにアタッチします。**|*chrome.exe*、 *iexplore.exe*、または他のプロセス|必要に応じて、リソース モニターを使用して、プロセスを識別できるようにします。 「[Remote debugging](../debugger/remote-debugging.md)」(リモート デバッグ) を参照してください。|
|ユニバーサル Windows アプリ (UWP) や OneCore、HoloLens、IoT アプリのリモート デバッグします。|インストールされているアプリ パッケージのデバッグ|N/A|参照してください[、インストールされているアプリ パッケージをデバッグ](debug-installed-app-package.md)を使用してではなく**プロセスにアタッチします。**|
|Visual Studio から起動していない、ユニバーサル Windows アプリ (UWP) や OneCore、HoloLens、IoT アプリをデバッグします。|インストールされているアプリ パッケージのデバッグ|N/A|参照してください[、インストールされているアプリ パッケージをデバッグ](debug-installed-app-package.md)を使用してではなく**プロセスにアタッチします。**|  
  
## <a name="use-debugger-features"></a>デバッガー機能を使用します。

Visual Studio デバッガー (ブレークポイントにヒット) などの完全な機能を使用する場合のプロセスにアタッチすると、アプリケーションする必要があります正確に一致、ローカルのソースとシンボル。 つまり、デバッガーが、正しいを読み込むことにある必要があります[シンボル (.pdb) ファイル](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)します。 既定では、デバッグ ビルドが必要です。

リモートのデバッグ シナリオには、Visual Studio で開いているソース コード (または、ソース コードのコピー) が必要です。 リモート コンピューター上でコンパイル済みのアプリ バイナリをローカル コンピューター上と同じビルドからあります。

いくつかのローカル デバッグ シナリオでデバッグできます Visual Studio で、ソースへのアクセスなしで、適切なシンボル ファイルがアプリに存在する場合。 既定では、デバッグ ビルドが必要です。 詳細については、次を参照してください。[シンボルとソース ファイルを指定する](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)します。
  
##  <a name="BKMK_Troubleshoot_attach_errors"></a>アタッチ エラーをトラブルシューティングする  
 実行中のプロセスにデバッガーがアタッチすると、このプロセスは、1 種類以上のコードを含むことができます。 デバッガーをアタッチできるコードの種類は **[コードの種類の選択]** ダイアログ ボックスで表示されて選択されています。  
  
 デバッガーは、ある種類のコードに正常にアタッチできても、別の種類にはアタッチできないことがあります。 この問題は、リモート コンピューターで動作しているプロセスにアタッチしようとする場合に発生することがあります。 リモート コンピューターには、一部の種類のコードにしか対応しないリモート デバッグ コンポーネントがインストールされている場合があるためです。 また、ダイレクト データベース デバッグのために複数のプロセスにアタッチしようとした場合にも発生することがあります。 SQL デバッグ機能は、単一プロセスへのアタッチのみをサポートします。  
  
 デバッガーがすべてではありませんが、一部の種類のコードに接続できる場合は、アタッチできなかった種類を識別するメッセージを参照してください。  
  
 デバッガーが少なくとも 1 種類のコードに正常にアタッチできる場合は、プロセスのデバッグを開始できます。 正常にアタッチされたコードの種類のみをデバッグできます。 プロセスにアタッチされていないコードは引き続き実行されますが、ブレークポイントを設定、データの表示、またはそのコードに他のデバッグ操作を実行することはできません。  
  
 デバッガーがコードの種類へのアタッチに失敗した理由に関する詳細な情報を設定する場合は、コードの種類のみに再アタッチしてみてください。  
  
 **ある種類のコードへのアタッチに失敗した理由を確認するには**  
  
1.  プロセスからデタッチします。 **デバッグ**メニューの **すべてデタッチ**します。  
  
1.  アタッチに失敗したコードの種類のみを選択して、プロセスに再アタッチします。  
  
    1.  **[プロセスにアタッチ]** ダイアログ ボックスの **[選択可能なプロセス]** の一覧で、プロセスを選択します。  
  
    2.  選択**選択**します。  
  
    3.  **[コードの種類の選択]** ダイアログ ボックスの **[次のコードの種類をデバッグする]** をクリックし、アタッチに失敗したコードの種類を選択します。 その他のコードの種類の選択を解除します。  
  
    4.  **[OK]** を選択します。  
  
    5.  **プロセスにアタッチ**ダイアログ ボックスで、**アタッチ**します。  
  
    このとき、アタッチは完全に失敗し、詳細なエラー メッセージが表示されます。  
  
## <a name="see-also"></a>関連項目  
 [複数プロセスをデバッグする](../debugger/debug-multiple-processes.md)   
 [Just-In-Time デバッグ](../debugger/just-in-time-debugging-in-visual-studio.md)   
 [リモート デバッグ](../debugger/remote-debugging.md)
