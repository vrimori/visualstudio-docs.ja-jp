---
title: Visual Studio のロード テスト シナリオでの仮想ネットワークの種類の指定 | Microsoft Docs
ms.date: 10/19/2016
ms.topic: conceptual
helpviewer_keywords:
- load tests, scenarios
- load tests, adding networks
- load tests, removing networks
- load tests, virtual networks
- network mix
ms.assetid: 3c4f7874-081a-4ec4-9510-4d6d7d863a11
author: gewarren
ms.author: gewarren
manager: douge
ms.technology: vs-ide-test
ms.openlocfilehash: f40c1d26d1b8f28fd72bbcc5eb4842724e2d1e89
ms.sourcegitcommit: 6a9d5bd75e50947659fd6c837111a6a547884e2a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/16/2018
---
# <a name="specify-virtual-network-types-in-a-load-test-scenario"></a>ロード テスト シナリオでの仮想ネットワークの種類の指定

*ネットワーク ミックス*を使用すると、ロード テスト シナリオで負荷をより現実的にシミュレートできます。 単一のネットワークの種類の代わりに、複数の種類のネットワークの種類から成るネットワーク ミックスを使用して、ロードが生成されます。 これにより、エンド ユーザーとアプリケーションとのやり取りをより現実的にシミュレートできます。

 ネットワーク ミックスでは、仮想ユーザーが特定の*ネットワーク プロファイル*を実行する確率を指定します。 ネットワーク プロファイルは、アプリケーション レイヤーにおけるネットワーク帯域幅のシミュレーションです。 待機時間はシミュレートしません。

 ロード テストを作成する場合、複数の種類のネットワーク接続からロードが生成されていることをシミュレートする必要がある場合があります。 ネットワーク ミックスには、いくつかの種類のネットワークがあります。 異なるネットワークがシミュレートされています。 `Cable-DSL 1.5Mbps` などのオプションを選択すると、テストに待機時間が挿入され、選択した帯域幅をシミュレートします。

 ネットワーク ミックスは、他のミックス オプションと同様に機能します。 ネットワークの種類は、ネットワーク ミックスに基づいて選択され、仮想ユーザーにランダムに関連付けられます。 そのユーザーのテストは、ミックスで指定した確率に基づいて、特定のネットワークの種類を使用して実行されます。

 ネットワーク ミックスを指定した後で、ネットワークの種類を追加したり、削除したりできます。 また、ミックス コントロールを使用して、ネットワーク ミックスの配分を変更することもできます。

 ミックス コントロールを使用すると、シナリオでのネットワークの配分を簡単に調整できます。

 詳細については、「[ミックス コントロールについて](../test/specify-virtual-network-types-in-a-load-test-scenario.md)」を参照してください。

## <a name="true-network-emulation"></a>トゥルー ネットワーク エミュレーション

 Visual Studio は、ロード テストを含むすべてのテストの種類にソフトウェア ベースのトゥルー ネットワーク エミュレーションを使用します。 トゥルー ネットワーク エミュレーションは、ネットワーク パケットを直接操作することでネットワークの状態をシミュレートします。 トゥルー ネットワーク エミュレーターは、イーサネットなどの信頼できる物理リンクを使用して、ワイヤード ネットワークとワイヤレス ネットワークの両方の動作をエミュレートできます。 次のネットワーク属性がトゥルー ネットワーク エミュレーションに組み込まれます。

-   ネットワーク上のラウンド トリップ時間 (待機時間)

-   有効な帯域幅の量

-   キュー動作

-   パケット損失

-   パケットの並べ替え

-   エラー反映

トゥルー ネットワーク エミュレーションでは、IP アドレスや TCP、UDP、ICMP などのプロトコルに基づいてネットワーク パケットを柔軟にフィルター処理することもできます。

ネットワーク ベースのアプリケーションの開発者およびテスト担当者は、トゥルー ネットワーク エミュレーションを使用して、目的のテスト環境のエミュレート、パフォーマンスの評価、変更の影響の予測、またはテクノロジの最適化に関する決定を行うことができます。 ハードウェア テスト ベッドと比較して、トゥルー ネットワーク エミュレーションは、よりコストが少なく柔軟性に富んだソリューションです。

## <a name="to-add-new-networks-to-a-scenario"></a>新しいネットワークをシナリオに追加するには

1.  シナリオのネットワーク ミックスを指定する際に、**[追加]** を選択します。

     新しいネットワーク エントリがグリッドに追加されます。

    > [!NOTE]
    > **[ネットワーク ミックスの編集]** ダイアログ ボックスを表示するには、既存のシナリオを右クリックし、**[ネットワーク ミックスの編集]** を選択します。

2.  **[ネットワークの種類]** 列で、新しいエントリの矢印を選択します。 目的のネットワークの種類を選択します。

3.  (省略可能) ミックス コントロールを調整して、テストの配分を指定します。 詳細については、「[ミックス コントロールについて](../test/specify-virtual-network-types-in-a-load-test-scenario.md)」を参照してください。

4.  ネットワークの追加作業が終了したら、**[OK]** を選択します。

## <a name="to-remove-networks-from-a-scenario"></a>ネットワークをシナリオから削除するには

1.  ロード テストを開きます。

2.  ネットワークを削除するシナリオを右クリックし、**[ネットワーク ミックスの編集]** を選択します。 **[ネットワーク ミックスの編集]** ダイアログ ボックスが表示されます。

3.  グリッドでネットワークを選択し、**[削除]** を選択します。

4.  (省略可能) ミックス コントロールを調整して、テストの配分を指定します。 詳細については、「[ミックス コントロールについて](../test/specify-virtual-network-types-in-a-load-test-scenario.md)」を参照してください。

5.  ネットワークの削除が完了したら、**[OK]** を選択します。

## <a name="about-the-mix-control"></a>ミックス コントロールについて

 ミックス コントロールを使用すると、ロード テストのシナリオで、テスト、ブラウザーの種類、またはネットワークの種類の間で配分する負荷の割合を調整できます。 割合の値を調整するには、スライダーを動かします。 ネットワークの種類のミックスの調整では、ロード テストのシナリオで仮想ユーザーが特定のネットワークのプロファイルを実行する確率を指定します。

 スライダーを動かすと、利用できるすべての項目の割合の値が変更されます。 項目が複数ある場合、追加または削除した分が他の項目に均等に配分されます。 この動作は、オーバーライドできます。 特定の項目のロック列のチェック ボックスをオンにすると、その項目に指定された割合の値がロックされます。 この状態でスライダーを動かすと、追加または削除した分はロックされていない残りの項目のみに適用されます。

 **[均等化]** ボタンは、割合の値をすべての項目に均等に割り当てる場合に使用します。 たとえば、項目が 3 つある場合、**[均等化]** を選択することで割合の値が、34、33、および 33 に設定されます。

> [!WARNING]
> **[均等化]** ボタンは、ロックされているあらゆる項目をオーバーライドします。

 また、スライダーを使用する代わりに、割合の値を **[%]** 列に直接入力することもできます。 割合の値を直接入力した場合、他の項目は自動的には調整されません。

> [!NOTE]
> 合計が 100% にならない場合、または **[%]** 列に入力された割合の値が小数値の場合、スライダーは無効になります。

割合の値を手動で入力する場合は、すべての項目の合計が 100% になるようにしてください。 ミックスを保存するとき、合計が 100% ではない場合、割合の値をそのままで受け入れるか、または戻って調整するかのどちらかを選択するよう要求されます。 そのままで受け入れることを選択した場合は、100% になるよう比例配分されます。  たとえば、項目が 2 つあって、手動でそれぞれ 80% と 40% に設定されている場合、最初の項目は 66.67% (80/120) に、2 番目の項目は 33.33% (40/120) に、それぞれ設定されます。